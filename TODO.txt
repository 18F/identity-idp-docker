docker to dos:

LATEST BLOCKER: deploy/migrate

base image:
    - add an explicit base docker image containing time consuming things like ruby, openssl
    - refactor identity-base-image cookbooks so that we can cache layers easily

secrets:
    - remove or defer all ConfigLoader calls in idp configs so that we can dockerbuild without secrets
    - double check that /etc/login.gov/keys/ is empty after each layer, or even remove it entirely

- move git clone of identity-idp out of chef and into dockerfile

- figure out which recipes from role[base] should really be in the docker image


build vs run split:
    - don't run deploy/activate script at all from dockerbuild
    - don't run deploy/migrate or rake db:migrate from dockerbuild
    - build-post-config fixes
        - move robots.txt into nginx, out of identity-idp

    activate configs:
        figure out what to do with /etc/login.gov/info (bind mount? pass in data using ENV?)

Container vs instance stuff
    - set hostname to reflect that it's in a container and isn't the host instance
    - make sure instance certificate / service discovery stuff is all happy
    - add info to deploy.json to tell us what container we're talking to

logging:
    - Make sure New Relic is working
    - mount volumes?
    - run aws log agent inside the container instead?

